{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Guialvesds/Desktop/Projetos/orion/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/product.service\";\nimport * as i3 from \"src/app/services/alert.service\";\nimport * as i4 from \"../../components/product-form/product-form.component\";\nexport class NewProductComponent {\n  constructor(router, productServices, alert) {\n    this.router = router;\n    this.productServices = productServices;\n    this.alert = alert;\n    this.btnText = 'Cadastrar';\n    this.title = 'Novo produto';\n  }\n\n  ngOnInit() {}\n\n  createProduct(data) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const codRandon = 9999;\n\n      try {\n        const dados = {\n          code: Math.floor(Math.random() * codRandon),\n          name: data.name,\n          price: data.price,\n          inventory: data.inventory\n        };\n\n        if (data.code && data.name && data.price) {\n          yield _this.productServices.createProduct(dados).subscribe();\n\n          _this.alert.add('Produto cadastrado com sucesso!');\n\n          setTimeout(() => {\n            _this.router.navigate(['/']);\n          }, 1000);\n          console.log('Produto cadastrado com sucesso!');\n        } else {\n          _this.alert.add('Campos de código, nome e preço, são obrigatórios!');\n        }\n      } catch (error) {\n        _this.alert.add('Error ao cadastrar produto!');\n\n        console.log('Erro ao cadastrar produto.', error);\n      }\n    })();\n  }\n\n}\n\nNewProductComponent.ɵfac = function NewProductComponent_Factory(t) {\n  return new (t || NewProductComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i3.AlertService));\n};\n\nNewProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NewProductComponent,\n  selectors: [[\"app-new-product\"]],\n  decls: 1,\n  vars: 2,\n  consts: [[3, \"btnText\", \"title\", \"onsubmit\"]],\n  template: function NewProductComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"app-product-form\", 0);\n      i0.ɵɵlistener(\"onsubmit\", function NewProductComponent_Template_app_product_form_onsubmit_0_listener($event) {\n        return ctx.createProduct($event);\n      });\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"btnText\", ctx.btnText)(\"title\", ctx.title);\n    }\n  },\n  dependencies: [i4.ProductFormComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJuZXctcHJvZHVjdC5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"mappings":";;;;;;AAaA,OAAM,MAAOA,mBAAP,CAA0B;EAK9BC,YACUC,MADV,EAEUC,eAFV,EAGUC,KAHV,EAG6B;IAFnB;IACA;IACA;IAPV,eAAU,WAAV;IAEA,aAAQ,cAAR;EAMI;;EAEJC,QAAQ,IAAW;;EAEbC,aAAa,CAACC,IAAD,EAAc;IAAA;;IAAA;MAE/B,MAAMC,SAAS,GAAY,IAA3B;;MAGA,IAAI;QACF,MAAMC,KAAK,GAAG;UACZC,IAAI,EAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBL,SAA3B,CADK;UAEZM,IAAI,EAAEP,IAAI,CAACO,IAFC;UAGZC,KAAK,EAAER,IAAI,CAACQ,KAHA;UAIZC,SAAS,EAAET,IAAI,CAACS;QAJJ,CAAd;;QAOA,IAAIT,IAAI,CAACG,IAAL,IAAaH,IAAI,CAACO,IAAlB,IAA0BP,IAAI,CAACQ,KAAnC,EAA0C;UACxC,MAAM,KAAI,CAACZ,eAAL,CAAqBG,aAArB,CAAmCG,KAAnC,EAA0CQ,SAA1C,EAAN;;UAEA,KAAI,CAACb,KAAL,CAAWc,GAAX,CAAe,iCAAf;;UAEAC,UAAU,CAAC,MAAK;YACd,KAAI,CAACjB,MAAL,CAAYkB,QAAZ,CAAqB,CAAC,GAAD,CAArB;UACD,CAFS,EAEP,IAFO,CAAV;UAIAC,OAAO,CAACC,GAAR,CAAY,iCAAZ;QACD,CAVD,MAUO;UACL,KAAI,CAAClB,KAAL,CAAWc,GAAX,CAAe,mDAAf;QACD;MACF,CArBD,CAqBE,OAAOK,KAAP,EAAc;QACd,KAAI,CAACnB,KAAL,CAAWc,GAAX,CAAe,6BAAf;;QAEAG,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0CC,KAA1C;MACD;IA9B8B;EA+BhC;;AA5C6B;;;mBAAnBvB,qBAAmBwB;AAAA;;;QAAnBxB;EAAmByB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCbhCL;MAAsDA;QAAA,OAAYM,yBAAZ;MAAiC,CAAjC;MAAmCN;;;;MAAvEA,sCAAmB,OAAnB,EAAmBM,SAAnB","names":["NewProductComponent","constructor","router","productServices","alert","ngOnInit","createProduct","data","codRandon","dados","code","Math","floor","random","name","price","inventory","subscribe","add","setTimeout","navigate","console","log","error","i0","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Guialvesds\\Desktop\\Projetos\\orion\\src\\app\\pages\\new-product\\new-product.component.ts","C:\\Users\\Guialvesds\\Desktop\\Projetos\\orion\\src\\app\\pages\\new-product\\new-product.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ɵinitDomAdapter } from '@angular/platform-browser';\nimport { Router } from '@angular/router';\n\nimport { Product } from 'src/app/model/Product';\nimport { AlertService } from 'src/app/services/alert.service';\nimport { ProductService } from 'src/app/services/product.service';\n\n@Component({\n  selector: 'app-new-product',\n  templateUrl: './new-product.component.html',\n  styleUrls: ['./new-product.component.css'],\n})\nexport class NewProductComponent implements OnInit {\n  btnText = 'Cadastrar';\n\n  title = 'Novo produto';\n\n  constructor(\n    private router: Router,\n    private productServices: ProductService,\n    private alert: AlertService\n  ) {}\n\n  ngOnInit(): void {}\n\n  async createProduct(data: Product) {\n    \n    const codRandon: number =  9999;\n\n   \n    try {\n      const dados = {\n        code:  Math.floor(Math.random() * codRandon),\n        name: data.name,\n        price: data.price,\n        inventory: data.inventory,\n      };\n\n      if (data.code && data.name && data.price) {\n        await this.productServices.createProduct(dados).subscribe();\n\n        this.alert.add('Produto cadastrado com sucesso!');\n\n        setTimeout(() => {\n          this.router.navigate(['/']);\n        }, 1000);\n\n        console.log('Produto cadastrado com sucesso!');\n      } else {\n        this.alert.add('Campos de código, nome e preço, são obrigatórios!');\n      }\n    } catch (error) {\n      this.alert.add('Error ao cadastrar produto!');\n\n      console.log('Erro ao cadastrar produto.', error);\n    }\n  }\n}\n","<app-product-form [btnText]=\"btnText\" [title]=\"title\" (onsubmit)=\"createProduct($event)\"></app-product-form>\n\n"]},"metadata":{},"sourceType":"module"}